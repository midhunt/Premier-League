rm(list = ls())
# setting path to the working directory
setwd(paste(
Sys.getenv("MyGitRepo"),
"Premier-League",
sep = "/")
)
getwd()
library(data.table)
library(reshape)
FPL_Player_Statistics <- do.call("rbind",
lapply(
list.dirs("Teams",
recursive = F,
full.names = T),
FUN = function(folder) {
Reduce(function(...) merge(..., all=T),
lapply(list.files(folder,
full.names = T),
FUN = function(files){
fread(files)
}
)
)
}
)
)
View(FPL_Player_Statistics)
str(FPL_Player_Statistics)
FPL_Player_Statistics[, selected_by_percent := as.numeric(
gsub("%$",
"",
selected_by_percent
)
)]
View(FPL_Player_Statistics)
FPL_Player_Statistics[, as.numeric(gsub("^£", "", .SD)),
.SDcols = c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall")]
View(FPL_Player_Statistics)
FPL_Player_Statistics[, lapply(.SD, FUN = function(x){
as.numeric(gsub("^£", "", x))
}),
.SDcols = c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall")]
View(FPL_Player_Statistics)
FPL_Player_Statistics[, c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall") = lapply(.SD, FUN = function(x){
as.numeric(gsub("^£", "", x))
}), .SDcols = c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall")]
FPL_Player_Statistics[, .SD = lapply(.SD, FUN = function(x){
as.numeric(gsub("^£", "", x))
}), .SDcols = c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall")]
FPL_Player_Statistics[, .SDcols = lapply(.SD, FUN = function(x){
as.numeric(gsub("^£", "", x))
}), .SDcols = c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall")]
cost_columns <- c("now_cost", "cost_change_event",
"cost_change_event_fall", "cost_change_start",
"cost_change_start_fall")
FPL_Player_Statistics[, (cost_columns) = lapply(.SD,
FUN = function(x){
as.numeric(gsub("^£", "", x))
}
),
.SDcols = cost_columns]
FPL_Player_Statistics[, (cost_columns) := lapply(.SD,
FUN = function(x){
as.numeric(gsub("^£", "", x))
}
),
.SDcols = cost_columns]
View(FPL_Player_Statistics)
cost_columns_newnames <- c("now_cost_pounds", "cost_change_event_pounds",
"cost_change_event_fall_pounds", "cost_change_start_pounds",
"cost_change_start_fall_pounds")
setnames(x = FPL_Player_Statistics,
old = cost_columns,
new = cost_columns_newnames)
str(FPL_Player_Statistics)
